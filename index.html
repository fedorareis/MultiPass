<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Multipass by FedoraReis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-73046912-1', 'auto');
      ga('send', 'pageview');

    </script>
    <section class="page-header">
      <h1 class="project-name">Multipass</h1>
      <h2 class="project-tagline">The group password manager</h2>
      <a href="https://github.com/fedorareis/MultiPass" class="btn">View on GitHub</a>
      <a href="https://github.com/fedorareis/MultiPass/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/fedorareis/MultiPass/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
        <a id="multipass" class="anchor" href="#multipass" aria-hidden="true">
          <span class="octicon octicon-link"></span>
        </a>
        MultiPass
      </h1>

      <h2>Background</h2>
      <p>The idea for MultiPass was sparked by a problem that I had to solve at an internship. 
        The problem was that they needed a way to securely store their passwords so that all of the technicians in their Information Systems department could access them.
        Beyond secure storage, they also wanted an audit trail for the passwords. They wanted to know who created, accessed, or modified the passwords and when.
        I built an internal solution for the company, but it got me thinking about this problem on a larger scale. There are times where people within companies, clubs, organizations, etc. need acceess
        to the same passwords. There aren't a lot of good solutions to this, most solutions really on unsecure storage of the passwords such as shared documents or writing them down.
        A more secure solution would be for everyone to have another password manager that allows the owner of the password to share it with others, but that generally doesn't have support
        for auditing. Out of this problem was born MultiPass.
      </p>
        
      <h2>Development</h2>
      <p>Development of MultiPass was started by Kyle Reis in March 2015. The development process started with figuring out what features I was looking for in an initial prototype
        and deciding on an initial deployment environment. After some brainstorming and research an initial feature set was decided upon and a web deployment was decided upon.
        The next stage was figuring out how I was going to secure all the data yet allow full functionality. After some research and a lot of creative thinking a solution was found
        and a cryptographic system was developed. Once the cryptography was in place, the only thing left to do was set up the database and start building the functionality that was
        needed in the site. During the development process security advice was sought from a Cal Poly security professor.
      </p>
        
      <h2>Technical Details</h2>
      <p>MultiPass is built using the <a href="flask python 3">Flask</a> Python framework as its backend with its front end having a combination of HTML, CSS, and Javascript.
        At the heart of MultiPass is the client side cryptographic system. As my security professor loves to say, "Never roll your own crypto." With that in mind the cryptographic system was 
        implemented in Javascript using the <a href="http://bitwiseshiftleft.github.io/sjcl/">Stanford Javascript Crypto Library</a> (SJCL). The details of the the Cryptographic System
        can get a bit hard to follow so I am going to break it into 3 parts: Encryption, Decryption, and Sharing.
      </p>
      
      <h4>Encryption</h4>
      <div class="photo">
        <a href="images/Encryption.pdf">
          <img src="images/Encryption.png">
        </a>
      </div>
      <p>
        When a user creates their account their password is put into a key derivation function in this case PBKDF2 to create their user key. This user key will be regenerated each time 
        the user logs in. Also during registration a public/private key pair is generated for them. The private key is then encrypted with the user key using AES in GCM mode, the 
        resulting cyphertext is then stored in the database with the user info. Each time a group is created (one is created by defualt for each user), the group is given a group key. 
        This key is generated using the Fortuna pseudo-random number generator that is implemented in SJCL. The group key is encrypted for each user in the group with the user's public 
        key. The encrypted group key and the user's public key are stored in the database with the user's information. Each password for the group is encrypted with the group key using 
        AES in GCM mode. The encrypted passwords are then stored in a database.
      </p>
      
      <h4>Decryption</h4>
      <div class="photo">
        <a href="images/Decryption.pdf">
          <img src="images/Decryption.png">
        </a>
      </div>
      <p>
        The encrypted private key is pulled from the database and is decrypted with the user key. The private key is then used to decrypt all of the group keys the user has access to.
        Once a group key is decrypted it will be used to decrypt all of the passwords that were encrypted with that group key.   
      </p>
      
      <h4>Sharing</h4>
      <div class="photo">
        <a href="images/Sharing.pdf">
          <img src="images/Sharing.png">
        </a>
      </div>
      <p>
        The final big question is how is the group key shared. That is where the public key from the Encryption section comes in. First the private key is decrypted with the user key.
        Then the group key is decrypted with the user's private key. The public key for the user that the key is being shared with is fetched from the database, then the group key
        is encrypted using the user's public key and is stored back in the database with the user's data.
      </p>
      
      <h2>Features</h2>
      <h4>Implemented</h4>
        <ul>
          <li>Registration and Login</li>
          <li>Password Storage</li>
          <li>Password Sharing</li>
        </ul>
      <h4>Future Items</h4>
        <ul>
          <li>Audit Log</li>
          <li>Password Reset</li>
          <li>Profiles</li>
          <li>Better Group Management</li>
          <li>UI Improvement</li>
        </ul>

      <footer class="site-footer">
        <p>If you have questions, comments, or ideas send me an email at <a href="mailto:FedoraReis@gmail.com?subject=MultiPass">FedoraReis@gmail.com</a></p>
        <span class="site-footer-owner">
          <a href="https://github.com/fedorareis/MultiPass">MultiPass</a> is maintained by <a href="https://github.com/fedorareis">FedoraReis</a>.
        </span>
        <span class="site-footer-credits">
          This page uses the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </span>
      </footer>
    </section>
  </body>
</html>
